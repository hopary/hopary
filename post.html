<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>文章详情</title>
 
    </script>
    <link rel="stylesheet" href="/hopary/css/styles.css">
</head>

<body>
    <!-- 导航栏占位 -->
    <div id="navbar"></div>

    <main class="container" id="post-content">
        <!-- 文章内容由 JavaScript 动态生成 -->
    </main>

     <!-- 页脚占位 -->
    <div id="footer"></div>

    <!-- Insert a star-placeholder at the end of the <body> tag. -->
        <div id="star-placeholder"></div>
    
        <script>
            // 使用 fetch API 加载公共脚本文件
            fetch('components/star.html')
               .then(response => response.text())
               .then(html => {
                    // 提取 script 标签的内容
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(html, 'text/html');
                    const scripts = doc.querySelectorAll('script');
    
                    // 将提取的 script 标签插入到页面中
                    const placeholder = document.getElementById('star-placeholder');
                    scripts.forEach(script => {
                        const newScript = document.createElement('script');
                        newScript.textContent = script.textContent;
                        placeholder.appendChild(newScript);
                    });
                });
        </script>

    <!-- 加载公共模块 -->
    <script>
        // 加载导航栏（注意路径中的 ../）
        fetch('/hopary/components/navbar.html')
            .then(response => response.text())
            .then(html => document.getElementById('navbar').innerHTML = html);

        // 加载页脚
        fetch('/hopary/components/footer.html')
            .then(response => response.text())
            .then(html => document.getElementById('footer').innerHTML = html);
        </script>   

<script>
    // 获取文章 ID
    const postId = new URLSearchParams(window.location.search).get('id');

    // 加载文章数据
    fetch('/hopary/data/posts.json')
        .then(response => response.json())
        .then(posts => {
            const post = posts.find(p => p.id === postId);
            if (post) {
                document.title = post.title;
                const content = `
                    <h2>${post.title}</h2>
                    <small>发布日期：${post.date}</small>
                    <p>${post.content.replace(/\n/g, '<br>')}</p>
                `;
                document.getElementById('post-content').innerHTML = content;
            } else {
                document.getElementById('post-content').innerHTML = '<p>文章未找到。</p>';
            }
        });
</script>
    


</body> 

</html>