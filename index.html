<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alog</title>
    <link rel="stylesheet" href="/hopary/css/styles.css">
</head>

<body>
    <!-- Insert a navigation bar at the beginning of the <body> tag.-->
    <div id="navbar"></div>


    <!-- 文章列表 -->
    <main class="container">
        <h2>最新文章</h2>
        <div class="post-list"> </div>
    </main>

    <!-- Insert a footer at the end of the <body> tag. -->
    <div id="footer"></div>

    <!-- Insert a star-placeholder at the end of the <body> tag. -->
    <div id="star-placeholder"></div>
    
    <script>
        // 使用 fetch API 加载公共脚本文件
        fetch('/components/star.html')
           .then(response => response.text())
           .then(html => {
                // 提取 script 标签的内容
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                const scripts = doc.querySelectorAll('script');

                // 将提取的 script 标签插入到页面中
                const placeholder = document.getElementById('star-placeholder');
                scripts.forEach(script => {
                    const newScript = document.createElement('script');
                    newScript.textContent = script.textContent;
                    placeholder.appendChild(newScript);
                });
            });
    </script>


    <!-- Add JavaScript at the bottom of the page. -->
    <script>
        // Load the navigation bar.
        fetch('/components/navbar.html')
            .then(response => response.text())
            .then(html => document.getElementById('navbar').innerHTML = html);
        // Load the footer.
        fetch('/components/footer.html')
            .then(response => response.text())
            .then(html => document.getElementById('footer').innerHTML = html);
    </script>

    <!-- 动态获取文章列表 -->
    <script>
        fetch('data/posts.json')
            .then(response => response.json())
            .then(posts => {
                const list = document.querySelector('.post-list');
                list.innerHTML = posts.map(post => `
                    <li>
                        <a href="posts/post.html?id=${post.id}">${post.title}</a>
                        <span class="date">${post.date}</span>
                    </li>
                `).join('');
            });
    </script>



</body>

</html>
